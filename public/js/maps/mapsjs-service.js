
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.30.4/HERE_NOTICE
 */

 H.util.eval("R.prototype.O=ca(3,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Dk,R.prototype.O,0);var d=a}else d=hl;d!==b&&b.qa(function(e,f,g){return c.gc(e)?(d.add(e,f,g),!0):!1});this.U=d});Th.prototype.b=ca(2,function(a){this.i=a;a=this.getState();a!==Qh.INIT&&a!==Qh.LOADING&&ai(this)});function zp(a,b){Wa.apply(null,arguments);return a}function Ap(){this.a={}}\nfunction Bp(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new Cp(e[d]))}}function Dp(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].Ad(c,d)&&f.push(a[b]);return f}\nfunction Cp(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.nc(e,!1,this.a)}}Cp.prototype.Ad=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.Ad(b))for(;a--;)if(this.b[a].Ad(b))return!0}else return!0;return!1};function W(a,b,c,d,e,f){if(a&&b)this.Cl(a),this.Ig(b),this.Md(c),this.Bl(e),this.rl(f),this.Oi(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",W);\nfunction Ep(a,b){var c=x.document,d,e=c&&c.createElement(\"a\"),f=\"\";if(c){if(b){var g=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement(\"base\"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\n\"\";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new W(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}W.parse=Ep;var Fp=0;W.prototype.clone=function(){Fp++;var a={},b;for(b in this.a)a[b]=this.a[b];return new W(this.s,this.f,this.c,a,this.g,this.b)};W.prototype.clone=W.prototype.clone;\nW.prototype.Cl=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.s=a;return this};W.prototype.setScheme=W.prototype.Cl;W.prototype.Hn=function(){return this.s};W.prototype.getScheme=W.prototype.Hn;W.prototype.Ig=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.f=a;return this};W.prototype.setHost=W.prototype.Ig;\nW.prototype.bn=function(){return this.f};W.prototype.getHost=W.prototype.bn;W.prototype.Md=function(a){this.c=a||void 0;return this};W.prototype.setPath=W.prototype.Md;W.prototype.un=function(){return this.c};W.prototype.getPath=W.prototype.un;W.prototype.Oi=function(a){if(a)if(\"object\"==typeof a)this.a=a;else throw Error('Parameter \"params\" must be an object.');else this.a={};return this};W.prototype.setQuery=W.prototype.Oi;W.prototype.jk=function(){return!Gp(this)};W.prototype.hasQuery=W.prototype.jk;\nW.prototype.getQuery=function(){return this.a};W.prototype.getQuery=W.prototype.getQuery;W.prototype.Bl=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.g=+a||void 0;return this};W.prototype.setPort=W.prototype.Bl;W.prototype.yn=function(){return this.g};W.prototype.getPort=W.prototype.yn;W.prototype.rl=function(a){this.b=a||void 0;return this};W.prototype.setAnchor=W.prototype.rl;W.prototype.ud=function(){return this.b};\nW.prototype.getAnchor=W.prototype.ud;W.prototype.I=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};W.prototype.mergeQuery=W.prototype.I;W.prototype.Ma=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Ig(a+\".\"+this.f)};\nW.prototype.addSubDomain=W.prototype.Ma;W.prototype.F=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.Md((this.c?this.c+\"/\":\"\")+a)};W.prototype.addSubPath=W.prototype.F;W.prototype.toString=function(){return[this.s+\"://\",this.f,this.g?\":\"+this.g:\"\",this.c||!Gp(this)||this.b?\"/\":\"\",this.c?encodeURI(this.c):\"\",Hp(this),this.b?\"#\"+encodeURIComponent(this.b):\"\"].join(\"\")};W.prototype.toString=W.prototype.toString;\nfunction Hp(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?\"\":\"=\"+encodeURIComponent(h).replace(/[!'()*]/g,function(k){return\"%\"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&\"function\"!==typeof e[d]){var f=a.a[d];C(f,Ip)?f.Rl.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?\"?\"+c.join(\"&\"):\"\"}function Jp(a){var b=Ef(\"H-service\",\"1.30.4\",\"2978c8b\");a.a.xnlp=\"CL_JSMv3.\"+b.version;return a}\nfunction Gp(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&\"function\"!==typeof a.a[b]&&(c++,0<c))break;return!c}function Ip(a){var b;if(!yc(a))throw new D(Ip,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!zc(c)&&!Cc(c))throw new D(Ip,0,\"The array can only contain strings and numbers\");}this.Rl=a}W.MultiValueQueryParameter=Ip;Ip.prototype.Sn=function(){return this.Rl};Ip.prototype.getValues=Ip.prototype.Sn;var Kp=Function(\"return this\")();rc(\"monospace serif\");function Lp(){}Lp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||Kp.document.createElement(\"canvas\")};Lp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Mp=new Lp;t(\"H.service.util.eval\",function(a){return eval(a)});function Np(){var a=decodeURIComponent(x.H.getScriptPath());a=a?\"/\"===a[a.length-1]?a.substring(0,a.length-1):a:\"https://js.api.here.com/v3/3.1.30.4\";return Ep(a).F(\"styles\")};function Op(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.D().clone().F(b+\"/\"+a.Cc()+\"/\"+c).I(f),l=a.Fh();this.J=a;this.W=k;sk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,p,q){var r=h.W.clone();l&&r.Ma(l[(q+p+m)%l.length]);r.F(q+\"/\"+m+\"/\"+p+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d,engineType:g.engineType});this.kb=b;this.s=c;this.a=f;this.yb=c.split(\".\")[0];this.ng=A(this.ng,this);this.getCopyrights=\nthis.ta;a.addEventListener(\"versionupdate\",this.ng)}u(Op,sk);Op.prototype.MAX_STORE_TIME=2592E6;n=Op.prototype;n.u=function(){sk.prototype.u.call(this);this.J.removeEventListener(\"versionupdate\",this.ng)};n.ta=function(a,b){return Dp(this.J.ta(),this.yb,b,a)};n.ng=function(){var a=this.J;this.W=a.D().clone().F(this.kb+\"/\"+a.Cc()+\"/\"+this.s).I(this.a);this.reload(!1)};n.fh=function(){return ld()};n.ge=function(){return ld()?kd():Op.l.ge.call(this)};function Pp(a,b){b=void 0===b?{}:b;if(!a.qk)throw new Xc(a);Pp.l.constructor.call(this);var c=Qp(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.c=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.c.Ig(a.host);a.subDomain&&this.c.Ma(a.subDomain);a.path&&this.c.Md(a.path);Jp(this.c);this.gf=c.headers||{}}u(Pp,F);t(\"H.service.Service\",Pp);function Qp(a,b){a=a.a();return b?zp({},a,b):a}\nPp.prototype.a=function(){return{}};Pp.prototype.D=function(){return this.c};Pp.prototype.getUrl=Pp.prototype.D;Pp.prototype.K=function(a,b,c,d){d=new rf(void 0===d?\"application/json\":d,a.toString(),fe,{headers:this.gf});d.then(b,Rp(this,a,c));return d};function Rp(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(Sp(b,d))):d.json().then(function(e){return c(a.b(e))},function(){return c(Sp(b,d))})}}Pp.prototype.b=function(a){return Error(a.message)};\nfunction Sp(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function Y(a){a=zp({},this.b,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(Y,0,'\"'+c+'\" must be specified');this.ul(a.baseUrl);this.a=b;this.c.I({apikey:b});this.f=a.headers||{};this.g=Ua(a.servicesConfig||{})}t(\"H.service.Platform\",Y);Y.prototype.b={apikey:null,baseUrl:new W(\"https\",\"hereapi.com\")};Y.prototype.ul=function(a){this.c=Jp(a.clone());this.a=a=this.a;this.c.I({apikey:a})};Y.prototype.setBaseUrl=Y.prototype.ul;Y.prototype.hc=function(){return this.c};\nY.prototype.getBaseUrl=Y.prototype.hc;Y.prototype.Ya=function(a,b){try{return a.qk=!0,new a(zp({platformBaseUrl:this.hc(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{delete a.qk}};Y.prototype.createService=Y.prototype.Ya;function Tp(a){Tp.l.constructor.call(this,Tp,a);a=Qp(this,a);this.bc=a.shards;(this.Ra=a.ignoreTypes?null:a.type)&&this.D().Ma(this.Ra);this.cc=a.version;this.Xc=new Ap;this.vi={};this.Rf=0;\"newest\"===this.cc&&this.ph()}u(Tp,Pp);t(\"H.service.MapTileService\",Tp);Tp.prototype.a=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};Tp.CONFIG_KEY=\"maptile\";\nfunction Vp(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Tp.prototype.Fh=function(){return this.bc};Tp.prototype.ek=function(){return this.Ra};Tp.prototype.getType=Tp.prototype.ek;Tp.prototype.Cc=function(){return this.cc};Tp.prototype.getVersion=Tp.prototype.Cc;Tp.prototype.Si=function(a){this.cc=a};Tp.prototype.ta=function(){this.Rf||(this.cc&&\"newest\"!==this.cc||\"traffic\"===this.Ra)&&this.Re();return this.Xc};Tp.prototype.getCopyrights=Tp.prototype.ta;n=Tp.prototype;\nn.$i=function(a){a=a.response;var b;Vp(a,\"map\");Vp(a,\"scheme\");Vp(a,\"tiletype\");Vp(a,\"format\");Vp(a,\"resolution\");Vp(a,\"language\");if(\"newest\"===this.cc&&\"traffic\"!==this.Ra)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.Si(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.Lh=a;this.dispatchEvent(\"infoupdate\")};n.Zi=function(a){Bp(this.Xc,a);this.dispatchEvent(\"copyrightupdate\")};\nn.ph=function(){var a=this;var b=this.D().clone().F(\"info\").I({output:\"json\"});this.bc&&b.Ma(this.bc[0]);this.K(b,function(c){a.$i(c)},function(c){throw c;})};n.Re=function(){var a=this;var b=this.D().clone().F(\"copyright\").F(a.Cc()).I({output:\"json\"});this.bc&&b.Ma(this.bc[0]);this.Rf=1;this.K(b,function(c){a.Rf=2;a.Zi(c)},function(c){a.Rf=-1;throw c;})};n.xh=function(){return this.Lh};Tp.prototype.getInfo=Tp.prototype.xh;\nTp.prototype.Me=function(a,b,c,d,e,f){var g=this.D().clone().F(a+\"/\"+this.Cc()+\"/\"+b+\"/\"+c+\"/\"+d).I(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.vi[g];h||(h=new Op(this,a,b,c,d,e,zp({headers:this.gf},f||{})),this.vi[g]=h);return h};Tp.prototype.createTileProvider=Tp.prototype.Me;Tp.prototype.wc=function(a,b,c,d,e,f,g,h){a=this.Me(a,b,c,d,e,h);return new ll(a,{opacity:f,dark:!!g})};Tp.prototype.createTileLayer=Tp.prototype.wc;\nY.prototype.Ah=function(a){return this.Ya(Tp,a)};Y.prototype.getMapTileService=Y.prototype.Ah;function Wp(a,b,c){var d=this;c=c||{};var e=+c.min,f=+c.max;c.tileSize=c.tileSize||512;c.min=e?Yd(e,1,17):1;c.min+=Bk(c.tileSize,1);c.max=f?Yd(f,1,17):17;Wp.l.constructor.call(this,c);C(a,Xp,Wp,0);C(b,Ph,Wp,1);this.o=a;b.b&&b.b(\"OMV\");this.ac(b,!0);this.s=function(){Yp(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.s);Yp(this);Wp.prototype.J=function(){var g=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.D().c);return g?g[1]:B+\"\"}()}u(Wp,R);t(\"H.service.omv.Provider\",Wp);Wp.prototype.Ed=df;\nWp.prototype.providesOMV=Wp.prototype.Ed;function Yp(a){var b=a.yd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");a.v=new RegExp(\"^\"+b.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}Wp.prototype.gc=function(a){return this.v.test(a)};Wp.prototype.cacheFilter=Wp.prototype.gc;Wp.prototype.yd=function(a,b,c){return Zp(this.o,a,b,c).toString()};Wp.prototype.getTileKey=Wp.prototype.yd;Wp.prototype.Ob=function(){return this.N};Wp.prototype.getCache=Wp.prototype.Ob;Wp.prototype.MAX_STORE_TIME=2592E6;\nWp.prototype.fh=function(){return ld()};Wp.prototype.ge=function(){return ld()?kd():Wp.l.ge.call(this)};Wp.prototype.K=function(a,b,c,d,e){return this.o.jb(a,b,c,d,e)};Wp.prototype.requestInternal=Wp.prototype.K;Wp.prototype.rc=function(a){a.b&&a.b(\"OMV\");this.ac(a)};Wp.prototype.setStyle=Wp.prototype.rc;Wp.prototype.ua=function(){return Wp.l.ub.apply(this)};Wp.prototype.getStyle=Wp.prototype.ua;\nWp.prototype.ub=function(){var a=Wp.l.ub.apply(this),b;this.C&&(a.getState()===Qh.READY?(b=a.vd())&&b.global&&(this.c&&(b.global.ux_language=this.c),this.a&&(b.global.ux_language_fallback=this.a),a=new Th(b,a.hc())):a.load());return a};function $p(a,b,c){var d=a.ub().getState()===Qh.READY,e=zc(b),f=zc(c);e&&(a.c=b);f&&(a.a=c);if(e||f)a.C=!0,d&&a.g()}Wp.prototype.u=function(){Wp.l.u.call(this);this.o.removeEventListener(\"versionupdate\",this.s)};Wp.prototype.N=new Dk(256);\nWp.prototype.ta=function(a,b){return Dp(this.o.ta(),this.J,b,a)};Wp.prototype.getCopyrights=Wp.prototype.ta;function Xp(a){Xp.l.constructor.call(this,Xp,a);a=Qp(this,a).mapVersion;this.df=tc(a)?a:aq[this.D().toString()];tc(this.df)||bq(this)}u(Xp,Pp);t(\"H.service.omv.Service\",Xp);Xp.prototype.a=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};Xp.CONFIG_KEY=\"omv\";var aq={};Fc(aq);Xp.prototype.nn=function(){return this.df};Xp.prototype.getMapVersion=Xp.prototype.nn;\nfunction bq(a){a.K(a.D().clone().F(\"../../info\"),function(b){b=b.mapVersion;var c=a.D().toString();a.df=b;b!==aq[c]&&(aq[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}Xp.prototype.qd=function(a,b){return new ll(new Wp(this,a,b),{max:22})};Xp.prototype.createLayer=Xp.prototype.qd;Xp.prototype.jb=function(a,b,c,d,e){return this.K(Zp(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nfunction Zp(a,b,c,d){b=a.D().clone().F(d+\"/\"+b+\"/\"+c+\"/omv\");tc(a.df)&&b.I({mv:a.df});return b}Xp.prototype.he=function(a){return Np().F(a)};Xp.prototype.Ch=function(a,b){if(!Ca(a))throw new D(this.Ch,0,'\"onResult\" must be a function');if(!Ca(b))throw new D(this.Ch,1,'\"onError\" must be a function');return this.K(this.D().clone().Md(\"v2/vectortiles/pviews\"),a,b)};Xp.prototype.getPoliticalViews=Xp.prototype.Ch;Y.prototype.$j=function(a){return this.Ya(Xp,a)};Y.prototype.getOMVService=Y.prototype.$j;\nXp.prototype.Re=function(){this.Xc=new Ap;this.K(this.D().clone().F(\"../../copyrights\"),A(this.Zi,this),hd)};Xp.prototype.Zi=function(a){Bp(this.Xc,a);this.dispatchEvent(\"copyrightupdate\")};Xp.prototype.ta=function(){this.Xc||this.Re();return this.Xc};Xp.prototype.getCopyrights=Xp.prototype.ta;Y.prototype.Sf=function(a,b,c,d,e,f){var g=this.Ah(),h=this.Ah({type:\"aerial\"}),k=this.dk(),l=this.$j(),m=Vj.WEBGL,p={},q={crossOrigin:\"anonymous\"};if(Da(a)){var r=a;\"crossOrigin\"in r&&(q.crossOrigin=r.crossOrigin);a=r.tileSize;b=r.ppi;c=r.lg;d=r.lg2;e=r.style;f=r.pois;r.engineType&&(m=r.engineType,q.engineType=m)}var v=a||512;if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.Sf,1,b);}else p.ppi=+b;c&&(p.lg=c);d&&(p.lg2=d);e&&(p.style=e);f&&(p.pois=f);a=function(w,z,J,G,U){return w.wc(z,\nJ,v,G,p,1,U,q)};if(m===Vj.HARP&&!H.map.render.harp)throw new D(this.Sf,0,\"HARP engine is not supported, module not found\");b=m===Vj.WEBGL?new Th(l.he(\"omv/miami/normal.day.yaml\").toString()):new H.map.render.harp.Style(l.he(\"harp/miami/normal.day.json\").toString());c=m===Vj.WEBGL?new Th(l.he(\"omv/miami/truck.day.yaml\").toString()):new H.map.render.harp.Style(l.he(\"harp/miami/normal.day.json\").toString());d={engineType:m};b=l.qd(b,d);$p(b.ga(),p.lg,p.lg2);c=l.qd(c,d);$p(c.ga(),p.lg,p.lg2);l=k.zj(p.lg?\n{lg:p.lg,i18n:!0,engineType:m}:{engineType:m});return{vector:{normal:{map:b,truck:c,traffic:k.yj(void 0,m),trafficincidents:l}},raster:{normal:{xbase:a(g,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:a(g,\"xbasetile\",\"normal.night\",\"png8\",!0),base:a(g,\"basetile\",\"normal.day\",\"png8\",!1),basenight:a(g,\"basetile\",\"normal.night\",\"png8\",!0),map:a(g,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:a(g,\"maptile\",\"normal.night\",\"png8\",!0),trafficincidents:l,transit:a(g,\"maptile\",\"normal.day.transit\",\"png8\",!1),\nlabels:a(g,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:a(h,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:a(h,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:a(h,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:a(h,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:a(h,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:a(h,\"basetile\",\"terrain.day\",\"jpg\",!1),map:a(h,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:a(h,\"labeltile\",\"terrain.day\",\"png\",!1)}}}};Y.prototype.createDefaultLayers=Y.prototype.Sf;function cq(){this.a={}}cq.prototype.Cb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=dq.MARKER.replace(\"{{icon}}\",eq[a]||eq.OTHER);a=a.replace(\"{{color}}\",fq[b]||fq.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Li(Mi.POLYGON,gq.MARKER)};return this.a[c]=d=new Ij(a,b)};\nvar dq={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},eq=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\nfq={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},gq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function hq(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,iq,hq,0);An.call(this,{max:20,min:8,requestData:A(this.W,this),engineType:c.engineType});this.s=new cq;this.C=a;this.a=c;this.reload=A(this.reload,this);this.v=setInterval(this.reload,b||18E4)}u(hq,An);t(\"H.service.traffic.incidents.Provider\",hq);hq.prototype.c={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nhq.prototype.W=function(a,b,c,d,e){var f=this,g=this.c,h=this.s;return this.C.requestIncidentsByTile(a,b,c,function(k){var l=[];k=k.TRAFFIC_ITEMS;var m;if(k)for(k=k.TRAFFIC_ITEM,m=k.length;m--;){var p=k[m];var q=p.TRAFFIC_ITEM_TYPE_DESC;switch(q){case \"ACCIDENT\":case \"CONGESTION\":var r=q;break;case \"CONSTRUCTION\":r=\"ROADWORKS\";break;default:r=\"OTHER\"}r=h.Cb(r,g[p.CRITICALITY.DESCRIPTION]);q=p.LOCATION.GEOLOC.ORIGIN;q=new yn({lat:q.LATITUDE,lng:q.LONGITUDE},{provider:f,icon:r});q.setData(p);l.push(q)}d(l)},\ne,this.a)};hq.prototype.B=function(){An.prototype.B.call(this);clearInterval(this.v)};var jq=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function kq(a,b){var c={};this.a=a;Wa(c,b||c);ak.call(this,c);this.zg={};a=this.Pb(Pg.SPATIAL);a.update(a.a+1,Mg.ADD)}u(kq,ak);t(\"H.service.remote.ObjectProvider\",kq);kq.prototype.B=function(){ak.prototype.B.call(this)};kq.prototype.Lc=function(){return ff};kq.prototype.requestMarkers=kq.prototype.Lc;kq.prototype.Kc=function(){return ff};kq.prototype.requestDomMarkers=kq.prototype.Kc;kq.prototype.Hd=function(){return ff};kq.prototype.requestOverlays=kq.prototype.Hd;kq.prototype.Wb=df;\nkq.prototype.providesMarkers=kq.prototype.Wb;kq.prototype.Vb=df;kq.prototype.providesDomMarkers=kq.prototype.Vb;kq.prototype.Jc=df;kq.prototype.providesSpatials=kq.prototype.Jc;kq.prototype.Ag=function(){return ff};kq.prototype.requestSpatials=kq.prototype.Ag;function lq(a){return a.Dc(!0)}kq.prototype.Bg=function(a,b){a=mq(this,a,nq);b&&(a=a.filter(lq));return a};kq.prototype.requestSpatialsByTile=kq.prototype.Bg;\nfunction mq(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.a.parse(a,b,e))&&(d=a[c]));return d||ff}kq.prototype.ea=function(a){var b=a.gb();if(this.zg[b])throw new Xc(this.ea,\"Remote object \"+b+\" already added\");return this.zg[b]=a};kq.prototype.Ia=function(a){delete this.zg[a.gb()]};var nq=\"spatials\";function oq(a,b,c,d){oq.l.constructor.call(this,{min:pq,max:qq,engineType:d});C(a,iq,oq,0);this.s=a;this.a=c||rq;this.a.responseattributes=\"sh,fc\";this.c=setInterval(A(this.reload,this),b||18E4);this.f===Vj.WEBGL?this.ac(new Th(a.he(\"traffic/flow.yaml\").toString()),!0):this.ac(new H.map.render.harp.Style({styles:[{when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",renderOrder:10002,attr:{color:[\"case\",[\">=\",[\"get\",\"JF\"],10],\"black\",[\">=\",[\"get\",\"JF\"],8],\"red\",[\">=\",[\"get\",\"JF\"],4],\n\"yellow\",\"green\"],lineWidth:3,metricUnit:\"Pixel\"}}]}))}u(oq,R);t(\"H.service.traffic.flow.Provider\",oq);oq.prototype.xi=df;oq.prototype.providesGeoJSON=oq.prototype.xi;oq.prototype.ua=function(){return this.ub()};oq.prototype.getStyle=oq.prototype.ua;oq.prototype.rc=function(a){a.b&&a.b(\"GeoJSONTileSource\");this.ac(a)};oq.prototype.setStyle=oq.prototype.rc;var rq={locationreferences:\"tmc,shp\"};oq.prototype.u=function(){oq.l.u.call(this);clearInterval(this.c)};\noq.prototype.K=function(a,b,c,d,e){return this.s.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.a)};oq.prototype.requestInternal=oq.prototype.K;\noq.prototype.rd=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},m;var p=d.RWS.length;for(f=0;f<p;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==jq.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var z=r[q].FIS;var J=z.length;for(z=0;z<J;z++){var G=r[q].FIS[z].FI;var U=G.length;for(g=0;g<U;g++){var X=G[g];var xa=[];var ia=X.CF[0];var gc=!!ia.SSS;var wb={type:\"Feature\",properties:ia,geometry:{type:\"MultiLineString\",coordinates:xa}};wb.properties.LHT=\nw;X.SHP.length&&(wb.properties.FC=X.SHP[0].FC);gc&&(m=[]);for(ia=0;ia<X.SHP.length;ia++){var md=X.SHP[ia].value;var wi=md.length;for(h=0;h<wi;h++){var Qe=gc?m:void 0,Xb=new $n(md[h].trim()),Xf=[],cd={};for(Xb.ze();-1!==(k=Xb.Tb());)k===sq?(cd.lat=+String.fromCharCode.apply(oq,Xb.Ud()),Xb.next(),Xb.ze()):k===tq?(cd.lng=+String.fromCharCode.apply(oq,Xb.Ud()),Xf.push([cd.lng,cd.lat]),Qe&&Qe.push(Zf(cd)),cd=[],Xb.next(),Xb.ze()):Xb.next();cd.lng=+String.fromCharCode.apply(oq,Xb.Ud());Xf.push([cd.lng,\ncd.lat]);Qe&&Qe.push(Zf(cd));k=Xf;xa.push(k)}}l.features.push(wb)}}}}return oq.l.rd.call(this,a,b,c,l,e)};oq.prototype.createTileInternal=oq.prototype.rd;var qq=21,pq=10,tq=32,sq=44;function uq(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete uq.a[f];m&&a.Kj&&a.Kj.call(k,m)}if(!a.url||!a.eh)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.eh)throw Error(\"Parameters options.callback must be a function\");var c=a.Ap||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof W?a.url:Ep(a.url,a.zp);var f=uq.b++;var g=a.jm||\"callback\";var h=a.eh;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));uq.a[f]=function(m){b();h.call(k,m)};e.type=\"text/javascript\";e.src=c.toString()+(c.jk()?\"&\":\"?\")+g+\"=\"+(a.Bp?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",uq);uq.Yn=function(a){return(a=uq.a[a])?a:function(){}};uq.handleResponse=uq.Yn;uq.b=0;uq.a={};function iq(a){iq.l.constructor.call(this,iq,a);this.km=Qp(this,a).callbackKey}u(iq,Pp);t(\"H.service.traffic.Service\",iq);iq.prototype.a=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};iq.CONFIG_KEY=\"traffic\";iq.prototype.yj=function(a,b){return new ll(new oq(this,void 0,a,b),{max:22})};iq.prototype.createFlowLayer=iq.prototype.yj;iq.prototype.zj=function(a){return new Bn(new hq(this,void 0,a))};iq.prototype.createIncidentsLayer=iq.prototype.zj;\nfunction vq(a,b,c,d){return uq({url:b,eh:c,Kj:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},jm:a.km})}iq.prototype.Xo=function(a,b,c){a=this.D().clone().F(\"incidents.json\").I(a);return vq(this,a,b,c)};iq.prototype.requestIncidents=iq.prototype.Xo;iq.prototype.Wo=function(a,b,c,d,e,f){a=this.D().clone().F([\"flow/json\",c,a,b].join(\"/\")).I(f||{});return vq(this,a,d,e)};iq.prototype.requestFlowByTile=iq.prototype.Wo;\niq.prototype.Yo=function(a,b,c,d,e,f){a=this.D().clone().F([\"incidents/json\",c,a,b].join(\"/\")).I(f||{});return vq(this,a,d,e)};iq.prototype.requestIncidentsByTile=iq.prototype.Yo;iq.prototype.he=function(a){return Np().F(a)};Y.prototype.dk=function(a){return this.Ya(iq,a)};Y.prototype.getTrafficService=Y.prototype.dk;function wq(a){wq.l.constructor.call(this,wq,a);this.ol=Qp(this,a).reverseSubDomain}u(wq,Pp);t(\"H.service.GeocodingService\",wq);wq.prototype.a=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};wq.CONFIG_KEY=\"geocoding\";wq.prototype.b=function(a){return Error(a.Details||a.message||a.error)};wq.prototype.rh=function(a,b,c){a=this.D().clone().F(\"geocode.json\").I(a);return this.K(a,b,c)};wq.prototype.geocode=wq.prototype.rh;\nwq.prototype.Bi=function(a,b,c){a=this.D().clone().F(\"reversegeocode.json\").I(a);this.ol&&a.Ma(this.ol);return this.K(a,b,c)};wq.prototype.reverseGeocode=wq.prototype.Bi;wq.prototype.search=function(a,b,c){a=this.D().clone().F(\"search.json\").I(a);return this.K(a,b,c)};wq.prototype.search=wq.prototype.search;Y.prototype.Ym=function(a){return this.Ya(wq,a)};Y.prototype.getGeocodingService=Y.prototype.Ym;function xq(a){xq.l.constructor.call(this,xq,a)}u(xq,Pp);t(\"H.service.PlacesService\",xq);xq.prototype.a=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};xq.CONFIG_KEY=\"places\";xq.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};xq.prototype.request=function(a,b,c,d){return this.T(a,b,c,d)};\nxq.prototype.T=function(a,b,c,d){a=this.D().clone().F(a).I(b||{});return this.K(a,c,d)};xq.prototype.search=function(a,b,c){return this.T(\"discover/search\",a,b,c)};xq.prototype.search=xq.prototype.search;xq.prototype.ip=function(a,b,c){return this.T(\"suggest\",a,b,c)};xq.prototype.suggest=xq.prototype.ip;xq.prototype.um=function(a,b,c){return this.T(\"discover/explore\",a,b,c)};xq.prototype.explore=xq.prototype.um;xq.prototype.fm=function(a,b,c){return this.T(\"discover/around\",a,b,c)};\nxq.prototype.around=xq.prototype.fm;xq.prototype.$n=function(a,b,c){return this.T(\"discover/here\",a,b,c)};xq.prototype.here=xq.prototype.$n;xq.prototype.lm=function(a,b,c){return this.T(\"categories/places\",a,b,c)};xq.prototype.categories=xq.prototype.lm;xq.prototype.wm=function(a,b,c,d){a=Ep(a).I(this.D().getQuery()).I(d||{});return this.K(a,b,c)};xq.prototype.follow=xq.prototype.wm;Y.prototype.vn=function(a){return this.Ya(xq,a)};Y.prototype.getPlacesService=Y.prototype.vn;function yq(a){yq.l.constructor.call(this,yq,a);this.f=a.getToken}u(yq,Pp);t(\"H.service.iml.Service\",yq);yq.prototype.a=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};\nyq.prototype.b=function(a){function b(){for(var d=ea(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:[\"code\",\"title\",\"cause\",\"action\"],format:function(){return a.code+\": \"+a.title+\"; cause: \"+a.cause+\"; action: \"+a.action}},{keys:[\"error\",\"error_description\"],format:function(){return a.error+\": \"+a.error_description}},{keys:[\"error\",\"errorMessage\"],format:function(){return a.error+\": \"+a.errorMessage}}];\nreturn Error(Da(a)?b():a)};yq.prototype.fe=function(a,b,c,d,e){var f=this.fe;zq(f,0,a,b);Aq(f,2,c,d);a=this.D().clone().F(a+\"/layers/\"+b+\"/statistics\").I(e||{});return this.T(a,\"GET\",c,d)};yq.prototype.getStatistics=yq.prototype.fe;yq.prototype.$f=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.D().clone().F(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).I(Object.assign({clip:!0},h));return this.T(a,\"GET\",k?f:function(m){return m.arrayBuffer().then(f)},g,void 0,k?\"application/json\":\"arraybuffer\")};\nyq.prototype.getFeaturesByTile=yq.prototype.$f;yq.prototype.Sj=function(a,b,c,d,e,f){var g=this.Sj;Bq(g,a);zq(g,1,b,c);Aq(g,3,d,e);a=Cq(this,a,b,c,f);return this.T(a,\"GET\",d,e)};yq.prototype.getFeatureById=yq.prototype.Sj;yq.prototype.cd=function(a,b,c,d,e,f){var g=this.cd;Dq(g,a);zq(g,1,b,c);Aq(g,3,d,e);a=Eq(this,a,b,c,f);return this.T(a,\"GET\",d,e)};yq.prototype.getFeaturesById=yq.prototype.cd;\nyq.prototype.Zd=function(a,b,c,d,e){var f=this.Zd;if(!Da(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(f,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');zq(f,1,b,c);Aq(f,3,d,e);a=this.D().clone().F(b+\"/layers/\"+c+\"/bbox\").I(a);return this.T(a,\"GET\",d,e)};yq.prototype.getFeaturesByBoundingBox=yq.prototype.Zd;\nyq.prototype.Uj=function(a,b,c,d,e){var f=this.Uj;if(!(Da(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');zq(f,1,b,c);Aq(f,3,d,e);a=this.D().clone().F(b+\"/layers/\"+c+\"/spatial\").I(a);return this.T(a,\"GET\",d,e)};yq.prototype.getFeaturesByPointAndRadius=yq.prototype.Uj;\nyq.prototype.Tj=function(a,b,c,d,e,f){var g=this.Tj;if(!Da(a)||!a.radius)throw new D(g,0,'must be an object with \"radius\"');Fq(g,1,b);zq(g,2,c,d);Aq(g,4,e,f);a=this.D().clone().F(c+\"/layers/\"+d+\"/spatial\").I(a);return this.T(a,\"POST\",e,f,b)};yq.prototype.getFeaturesByGeometryAndRadius=yq.prototype.Tj;yq.prototype.pl=function(a,b,c,d,e){var f=this.pl;zq(f,0,a,b);Aq(f,2,c,d);a=this.D().clone().F(a+\"/layers/\"+b+\"/search\").I(e||{});return this.T(a,\"GET\",c,d)};yq.prototype.searchFeatures=yq.prototype.pl;\nyq.prototype.uk=function(a,b,c,d,e){var f=this.uk;zq(f,0,a,b);Aq(f,2,c,d);a=this.D().clone().F(a+\"/layers/\"+b+\"/iterate\").I(e||{});return this.T(a,\"GET\",c,d)};yq.prototype.iterateFeatures=yq.prototype.uk;yq.prototype.kd=function(a,b,c,d,e,f){var g=this.kd;Fq(g,0,a);zq(g,1,b,c);Aq(g,3,d,e);b=Gq(this,b,c,f);return this.T(b,\"PUT\",d,e,a)};yq.prototype.putFeatures=yq.prototype.kd;\nyq.prototype.hd=function(a,b,c,d,e,f){var g=this.hd;Fq(g,0,a);zq(g,1,b,c);Aq(g,3,d,e);b=Gq(this,b,c,f);return this.T(b,\"POST\",d,e,a)};yq.prototype.postFeatures=yq.prototype.hd;yq.prototype.sd=function(a,b,c,d,e){var f=this.sd;Dq(f,a);zq(f,1,b,c);Aq(f,3,d,e);a=Eq(this,a,b,c);return this.T(a,\"DELETE\",d,e)};yq.prototype.deleteFeatures=yq.prototype.sd;yq.prototype.fl=function(a,b,c,d,e,f,g){var h=this.fl;Bq(h,a);Fq(h,1,b);zq(h,2,c,d);Aq(h,4,e,f);a=Cq(this,a,c,d,g);return this.T(a,\"PUT\",e,f,b)};\nyq.prototype.putFeature=yq.prototype.fl;yq.prototype.Zk=function(a,b,c,d,e,f,g){var h=this.Zk;Bq(h,a);Fq(h,1,b);zq(h,2,c,d);Aq(h,4,e,f);a=Cq(this,a,c,d,g);return this.T(a,\"PATCH\",e,f,b)};yq.prototype.patchFeature=yq.prototype.Zk;yq.prototype.Dj=function(a,b,c,d,e){var f=this.Dj;Bq(f,a);zq(f,1,b,c);Aq(f,3,d,e);a=Cq(this,a,b,c);return this.T(a,\"DELETE\",d,e,void 0,\"text/plain\")};yq.prototype.deleteFeature=yq.prototype.Dj;\nfunction Gq(a,b,c,d){return a.D().clone().F(b+\"/layers/\"+c+\"/features\").I(d||{})}function Eq(a,b,c,d,e){b=Object.assign({},e,{id:new Ip(b)});return Gq(a,c,d,b)}function Cq(a,b,c,d,e){return a.D().clone().F(c+\"/layers/\"+d+\"/features/\"+b).I(e||{})}\nyq.prototype.T=function(a,b,c,d,e,f){f=void 0===f?\"application/json\":f;b={method:b,headers:Object.assign({},e?{\"Content-Type\":\"application/geo+json\"}:void 0,\"function\"===typeof this.f?{Authorization:\"Bearer \"+this.f()}:void 0,this.gf)};e&&(b.data=JSON.stringify(e));e=new rf(f,a.toString(),fe,b);e.then(c,Rp(this,a,d));return e};yq.CONFIG_KEY=\"iml\";function zq(a,b,c,d){wc(c,\"String\",a,b,\"must be a string\");wc(d,\"String\",a,b+1,\"must be a string\")}\nfunction Bq(a,b){wc(b,\"String\",a,0,\"must be a string\")}function Dq(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return\"string\"!==typeof c}))throw new D(a,0,\"must be a non-empty array of strings\");}function Fq(a,b,c){if(!Da(c))throw new D(a,b,\"must be a GeoJSON object\");}function Aq(a,b,c,d){if(!Ca(c))throw new D(a,b,\"must be a function\");if(!Ca(d))throw new D(a,b+1,\"must be a function\");}Y.prototype.cn=function(a){return this.Ya(yq,a)};Y.prototype.getIMLService=Y.prototype.cn;function Hq(a,b,c,d){Hq.l.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);C(a,yq,Hq,0);if(!zc(b))throw new D(Hq,1,'\"catalogHrn\" must be a string');if(!zc(c))throw new D(Hq,2,'\"layerId\" must be a string');this.v=a;this.a=b;this.c=c;this.s=Da(d)&&Da(d.parameters)?d.parameters:{};this.ac(this.f===Vj.WEBGL?new Th({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.a+\":\"+this.c},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",\nsize:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},\n{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#0258AE\",lineWidth:\"2px\",renderOrder:203}]}))}u(Hq,R);t(\"H.service.iml.Provider\",Hq);\nHq.prototype.K=function(a,b,c,d,e){return this.v.$f(a,b,c,this.a,this.c,d,e,this.s)};Hq.prototype.requestInternal=Hq.prototype.K;Hq.prototype.Ed=df;Hq.prototype.providesOMV=Hq.prototype.Ed;Hq.prototype.ua=function(){return this.ub()};Hq.prototype.getStyle=Hq.prototype.ua;Hq.prototype.rc=function(a){C(a,Th)&&a.b(\"MVT\");this.ac(a)};Hq.prototype.setStyle=Hq.prototype.rc;function Iq(a){Iq.l.constructor.call(this,Iq,a)}u(Iq,Pp);t(\"H.service.publicTransit.Service\",Iq);Iq.prototype.a=function(){return{subDomain:\"transit.router\",path:\"v8\"}};Iq.CONFIG_KEY=\"publicTransit\";Iq.prototype.Fn=function(a,b,c){a=this.D().clone().F(\"routes\").I(a);return this.K(a,b,c)};Iq.prototype.getRoutes=Iq.prototype.Fn;Iq.prototype.Qm=function(a,b,c){a=this.D().clone().F(\"departures\").I(a);return this.K(a,b,c)};Iq.prototype.getDepartures=Iq.prototype.Qm;\nIq.prototype.Jn=function(a,b,c){a=this.D().clone().F(\"stations\").I(a);return this.K(a,b,c)};Iq.prototype.getStations=Iq.prototype.Jn;Iq.prototype.b=function(a){return Error(JSON.stringify(a))};Y.prototype.Bn=function(a){return this.Ya(Iq,a)};Y.prototype.getPublicTransitService=Y.prototype.Bn;function Jq(a){Jq.l.constructor.call(this,Jq,a)}u(Jq,Pp);t(\"H.service.RoutingService\",Jq);Jq.prototype.a=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Jq.prototype.b=function(a){return Error(a.details)};Jq.CONFIG_KEY=\"routing\";Jq.prototype.Qd=function(a,b,c){a=this.D().clone().F(\"calculateroute.json\").I(a);return this.K(a,b,c)};Jq.prototype.calculateRoute=Jq.prototype.Qd;\nJq.prototype.dh=function(a,b,c){a=this.D().clone().Ma(\"isoline\").F(\"calculateisoline.json\").I(a);return this.K(a,b,c)};Jq.prototype.calculateIsoline=Jq.prototype.dh;function Kq(a){Kq.l.constructor.call(this,Kq,a)}u(Kq,Pp);t(\"H.service.RoutingService8\",Kq);Kq.CONFIG_KEY=\"routing_v8\";Kq.prototype.a=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Kq.prototype.b=function(a){return Error(a.error)};Kq.prototype.Qd=function(a,b,c){a=this.D().clone().I(a);return this.K(a,b,c)};Kq.prototype.calculateRoute=Kq.prototype.Qd;Kq.prototype.dh=function(a,b,c){a=this.D().clone().Ma(\"isoline\").Md(\"v8/isolines\").I(a);return this.K(a,b,c)};\nKq.prototype.calculateIsoline=Kq.prototype.dh;Y.prototype.bk=function(a,b){b=+b||7;if(7===b)b=Jq;else if(8===b)b=Kq;else throw new D(this.bk,1,\"allowed values are 7 and 8\");return this.Ya(b,a)};Y.prototype.getRoutingService=Y.prototype.bk;function Lq(){}t(\"H.service.extension.dataView.ITable\",Lq);Lq.prototype.be=function(){};Lq.prototype.getMeta=Lq.prototype.be;Lq.prototype.ee=function(){};Lq.prototype.getRowCount=Lq.prototype.ee;Lq.prototype.Bc=function(){};Lq.prototype.getRow=Lq.prototype.Bc;Lq.prototype.Ua=function(){};Lq.prototype.getColumnNames=Lq.prototype.Ua;Lq.prototype.Ue=function(){};Lq.prototype.getColumn=Lq.prototype.Ue;Lq.prototype.xa=function(){};Lq.prototype.getCell=Lq.prototype.xa;Lq.prototype.concat=function(){};\nLq.prototype.concat=Lq.prototype.concat;function Mq(){}t(\"H.service.extension.dataView.IRow\",Mq);Mq.prototype.Ua=function(){};Mq.prototype.getColumnNames=Mq.prototype.Ua;Mq.prototype.xa=function(){};Mq.prototype.getCell=Mq.prototype.xa;Mq.prototype.xd=function(){};Mq.prototype.getTable=Mq.prototype.xd;function Nq(a,b){this.a=a;this.b=b}t(\"H.service.extension.dataView.ObjRow\",Nq);Nq.prototype.Ua=function(){return this.a.Ua()};Nq.prototype.getColumnNames=Nq.prototype.Ua;Nq.prototype.xa=function(a){return this.a.xa(this.b,a)};Nq.prototype.getCell=Nq.prototype.xa;Nq.prototype.xd=function(){return this.a};Nq.prototype.getTable=Nq.prototype.xd;function Oq(){}t(\"H.service.extension.dataView.IColumn\",Oq);Oq.prototype.xa=function(){};Oq.prototype.getCell=Oq.prototype.xa;function Pq(a,b){this.b=a;this.a=b}t(\"H.service.extension.dataView.ObjColumn\",Pq);Pq.prototype.xa=function(a){return this.b.xa(a,this.a)};Pq.prototype.getCell=Pq.prototype.xa;function Qq(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Hb=a;if(b)for(this.Rd=b,this.gh=a=mc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.ji=c)}t(\"H.service.extension.dataView.ObjTable\",Qq);n=Qq.prototype;n.ji=B;n.Hb=B;n.Rd=B;n.gh=B;n.be=function(){return this.ji};Qq.prototype.getMeta=Qq.prototype.be;Qq.prototype.ee=function(){return this.Hb?this.Hb.length:0};Qq.prototype.getRowCount=Qq.prototype.ee;Qq.prototype.Bc=function(a){var b=this.Hb;return b&&b[a]?new Nq(this,a):B};\nQq.prototype.getRow=Qq.prototype.Bc;Qq.prototype.Ua=function(){return this.Rd||ff};Qq.prototype.getColumnNames=Qq.prototype.Ua;Qq.prototype.Ue=function(a){return this.gh[a]?new Pq(this,a):B};Qq.prototype.getColumn=Qq.prototype.Ue;Qq.prototype.xa=function(a,b){var c=this.Hb;return(a=c&&this.gh[b]&&c[a])&&a[b]};Qq.prototype.getCell=Qq.prototype.xa;\nQq.prototype.concat=function(){var a=arguments.length,b,c=this.Rd,d=\"\"+this.Rd,e=(this.Hb||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Qq))throw new D(this.concat,b);if(f.Hb){if(c&&\"\"+f.Rd!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Hb)}}return new Qq(e,this.Rd,this.ji)};Qq.prototype.concat=Qq.prototype.concat;function Rq(a,b){a.Hb?a.Hb.push(b):a.Hb=[b];return a.Hb.length-1};function Sq(a){var b=Tq;if(!a||!zc(Ze(a.layerId,a.layer))||!Cc(a.level)||tc(a.rowFilter)&&!Ca(a.rowFilter)||tc(a.rowFilterContext)&&!Da(a.rowFilterContext))throw new D(b,1,tc(\"invalid layer config\")?\"invalid layer config\":a);};function Uq(a,b,c,d){d=d||Vq;this.tf={};d.provider=a;this.invalidate=ef;Uq.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.b=c);this.wa(Mg.ADD)}u(Uq,bh);t(\"H.service.remote.Spatial\",Uq);var Vq={};Uq.prototype.gb=function(){return this.b||bh.prototype.gb.call(this)};Uq.prototype.getId=Uq.prototype.gb;Uq.prototype.Dg=Function();Uq.prototype.retain=Uq.prototype.Dg;Uq.prototype.release=Function();Uq.prototype.release=Uq.prototype.release;function Wq(a,b){this.a=a;b&&(this.b=b)}\nvar Xq=new Wq([]);Uq.prototype.$d=function(a){return(this.tf[a.key]||Xq).a};Uq.prototype.getGeometriesForTile=Uq.prototype.$d;Uq.prototype.zh=function(a){return(this.tf[a.key]||Xq).b};Uq.prototype.getLabels=Uq.prototype.zh;function Yq(a,b,c){a.tf[b.key]=new Wq(c,void 0)};function Zq(a,b,c,d,e,f){$q(Zq,1,b,c);$q(Zq,2,d,e);(this.f=a.length)?(this.s=a,this.aa=b,this.i=c,this.b=0,this.c=A(this.c,this),this.o=d,this.j=e,this.a=mc(),Wa(this.a,ar,f||{}),this.g={},x.setTimeout(this.c,0)):b(ff,!0)}var ar={duration:100,Am:\"geometry\",zm:\"WKT\",Zo:\"searchAttributes\",Cj:B};\nZq.prototype.c=function(){var a=[];var b=!1;for(var c=zk(),d;this.b<this.f;){var e=this.s[this.b];b=e.attributes;d=e.layerId||this.a.Cj;e.distance&&(b[this.a.Zo]={nearest:new Wf(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.Am]){try{var f=Fn(new $n(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.zm]=f}(e=this.g[d])||(e=this.g[d]=this.o({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||zk()-c>=this.a.duration){this.aa(a,\nb);break}}b?this.g=y:this.m=x.setTimeout(this.c,0)};Zq.prototype.cancel=function(){x.clearTimeout(this.m);this.b<this.f&&this.i(new x.Error(\"parsing canceled\"))};Zq.prototype.cancel=Zq.prototype.cancel;function $q(a,b,c,d){if(!Ca(c))throw new D(a,b,\"has invalid type\");if(!Ca(d))throw new D(a,b+1,\"has invalid type\");};function br(a,b,c){var d=8===a;this.b=b;this.c=c||hd;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nbr.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var p=m.Rows;if(m=p.length){var q=Object.keys(p[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});q=new Qq(p,q);for(k=0;k<m;k++){var r=p[k];if(e=r[this.f]){if(delete r[this.f],r=q.Bc(k))try{this.a?d=cr(this,a,b,r,e):d=dr(this,a,r,e.path),d.ka(a),g.push(d)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\")}}}f[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=\ng;return f};function cr(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Uq(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push(er(g[k++]));Yq(a,c,[new rh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function dr(a,b,c,d){d=new Wf(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new yn(d,a)):(a={icon:e,data:c,provider:b},a=new Qi(d,a));return a}function er(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new I(a[b++],a[b++]));return d};function fr(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;tc(a.min)||(a.min=12);fr.l.constructor.call(this,a);if(-1===gr.indexOf(c))throw new D(fr,2,\"invalid resultType\");this.a=c;if(d&&!Ca(d))throw new D(fr,2,\"invalid style callback\");this.Aa=d;this.W=a.pixelRatio||Se();this.Lb=A(this.Lb,this);this.O(new Dk(b,A(this.dc,this)));this.createTileInternal=4===c||8===c?A(this.N,this):A(this.J,this)}u(fr,R);t(\"H.service.extension.TileProvider\",fr);fr.prototype.c=!1;\nfr.prototype.getCapabilities=function(){return fr.l.getCapabilities.call(this)|Cj.CROP_LINES_BY_TILE|Cj.CROP_POLYGONS_BY_TILE};fr.prototype.jb=function(a,b,c,d){return this.c?fr.l.jb.call(this,a,b,c,d):B};fr.prototype.requestTile=fr.prototype.jb;fr.prototype.Lb=function(a){this.dispatchEvent(new td(\"error\",zc(a)?a:a+\"\",this))};fr.prototype.Wb=function(){return 1===this.a};fr.prototype.providesMarkers=fr.prototype.Wb;fr.prototype.Vb=function(){return 2===this.a};fr.prototype.providesDomMarkers=fr.prototype.Vb;\nfr.prototype.Jc=function(){return 4===this.a||8===this.a};fr.prototype.providesSpatials=fr.prototype.Jc;function hr(a){var b=a.yb;b||(a.v||(a.v=a.s(a.a,a.Aa,a.Lb)),b=a.yb=new kq(a.v),b.ka(a),b.addEventListener(a.i.Ea,A(a.kb,a)),b.yb=!0);return b}\nfr.prototype.J=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Ob().get(e);var f=2==this.a,g=[],h=hr(this);e?e.valid=!0:(a=e=new Lk(a,b,c,y),delete a.j,a.m=d);d=f?mq(h,e,\"domMarkers\"):mq(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.aj=e,(f||1===a.Cb().getState())&&g.push(a);e.data=g;return e};fr.prototype.kb=function(a){if(a=a.target.aj)a.valid=!1};fr.prototype.cp=function(a){this.C=!!a};fr.prototype.setTileCanvasRendering=fr.prototype.cp;fr.prototype.C=!0;\nfr.prototype.N=function(a,b,c,d){var e=hr(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Ob().get(f);h||(a=h=new Pk(f,a,b,c,g,this.W,c,e),delete a.j,a.m=d);this.C?(d=Mp.pop(g),h.V(d)||Mp.push(d,g)):Vk(h);return h};fr.prototype.dc=function(a,b){var c;if(4===this.a||8===this.a){a=b.Va();for(c=a.length;c--;)delete a[c].tf[b.key];b.data&&(Mp.push(b.xg(),this.tileSize),b.yg())}else for(a=b.data,c=a.length;c--;)delete a[c].aj};fr.prototype.u=function(){fr.l.u.call(this);hr(this).B()};\nvar ir={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};fr.ResultType=ir;var gr=[1,2,4,8];function Tq(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Tq.l.constructor.call(this,c);C(a,jr,Tq,0);Sq(b);e?(c=Ua(b),c.rowFilter=e.toString()):c=Ua(b);delete c.layer;c.layerId=Ze(b.layerId,b.layer);(new Mf).a(\"pde\",\"H.service.extension.worker.processor\");a=a.D().clone().F(kr+\".\"+lr).I({meta:1});(new Pf(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.c=!0;Wj(d)},this.Lb)}\nu(Tq,fr);t(\"H.service.extension.platformData.TileProvider\",Tq);Tq.prototype.s=function(a,b,c){a=new br(a,b,c);a.i=mr;return a};var mr=new Ug({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nTq.prototype.K=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Ob().get(g);var k={cancel:hd},l=!0,m=this.a;g&&(4===m||8===m?g.le()||(d(Mp.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var p=Kp.setTimeout(function(){h=new Pf(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Kp.clearTimeout(p)}}return k};Tq.prototype.requestInternal=Tq.prototype.K;Tq.prototype.u=function(){Tq.l.u.call(this);new Pf(\"pde\",{message:[this.uid,3]})};\nTq.ResultType=ir;function nr(a){this.a=a}nr.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function jr(a){jr.l.constructor.call(this,jr,a)}u(jr,Pp);t(\"H.service.extension.platformData.Service\",jr);jr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};jr.CONFIG_KEY=\"platformData\";jr.prototype.request=function(a,b,c,d,e){return this.T(a,b,c,d,e)};\njr.prototype.T=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.D().clone().F(a+\".\"+b).I(c);b===or.JSON&&(f=\"application/json\");return this.K(a,d,e,f)};var kr=\"tiles\";\njr.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:kr,FILE:\"file\",INDEX:\"index\"};var lr=\"json\",or={TXT:\"txt\",JSON:lr,HTML:\"html\",BIN:\"bin\"};jr.EntryPointType=or;\njr.prototype.wc=function(a,b){var c=b&&b.resultType;a=new Tq(this,a,b);var d;1==c||2===c?d=new Bn(a):d=new ll(a);return d};jr.prototype.createTileLayer=jr.prototype.wc;jr.prototype.Jd=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,lr,b,function(h){f=new Zq(h.geometries,c,d,function(k){return new Qq([],k.columnNames,k)},function(k,l){return k.Bc(Rq(k,l))},{Cj:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new nr(e)};\nfunction pr(a,b,c){if(!yc(a))throw new D(c,0,\"has invalid type\");if(!yc(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\njr.prototype.Mc=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];pr(a,b,this.Mc);$q(this.Mc,3,d,e);C(c,K,this.Mc,2);c={bbox:c.la+\",\"+c.ca+\";\"+c.na+\",\"+c.ia};f&&Wa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.Jd(\"search/bbox\",c,g,e));return new nr(k)};jr.prototype.searchByBoundingBox=jr.prototype.Mc;\njr.prototype.Yb=function(a,b,c,d,e,f,g){pr(a,b,this.Yb);C(c,Wf,this.Yb,2,\"has invalid type\");if(!Cc(d))throw new D(this.Yb,3,\"has invalid type\");$q(this.Yb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Wa(a,g);return this.Jd(\"search/proximity\",a,e,f)};jr.prototype.searchByProximity=jr.prototype.Yb;\njr.prototype.Xb=function(a,b,c,d,e,f,g){var h=\"\";pr(a,b,this.Xb);if(!zc(c)&&!C(c,L))throw new D(this.Xb,1,\"has invalid type\");if(!Cc(d))throw new D(this.Xb,2,\"has invalid type\");$q(this.Xb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(zc(c))a.route_id=c;else{d=c.Y;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Wa(a,g);return this.Jd(\"search/corridor\",a,e,f)};jr.prototype.searchByCorridor=jr.prototype.Xb;\nY.prototype.wn=function(a){return this.Ya(jr,a)};Y.prototype.getPlatformDataService=Y.prototype.wn;function qr(a){qr.l.constructor.call(this,qr,a)}u(qr,Pp);t(\"H.service.extension.geofencing.Service\",qr);qr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};qr.CONFIG_KEY=\"geofencing\";qr.prototype.request=function(a,b,c,d){return this.T(a,b,c,d)};qr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};\nqr.prototype.T=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Ca(c))throw new TypeError(\"onResult must be a function\");if(!Ca(d))throw new TypeError(\"onError must be a function\");a=this.D().clone().F(a+\".json\").I(b);return this.K(a,c,d)};qr.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};Y.prototype.Zm=function(a){return this.Ya(qr,a)};Y.prototype.getGeofencingService=Y.prototype.Zm;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function rr(a){var b=sr;if(!a||!zc(a.layerId)||tc(a.rowFilter)&&!Ca(a.rowFilter)||tc(a.rowFilterContext)&&!Da(a.rowFilterContext))throw new D(b,1,tc(\"invalid layer config\")?\"invalid layer config\":a);}function tr(a){return zc(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function ur(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=tr(a[b]);return c}\nfunction vr(a,b){var c=\"\",d,e,f=[];if(!b){var g={};f=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],g[b.layerId]||(g[b.layerId]=[]),g[b.layerId].push(b);for(d in g)f.push({layerId:d,geometries:g[d]});for(d=0;d<f.length;d++)c+=vr(f[d],f[d].layerId)}else if(a.geometries&&a.geometries.length)for(e=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+e.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){var h=a.geometries[d].attributes;g=a.geometries[d].geometry;for(b=\n0;b<e.length;b++)f.push(h[e[b]]);c+=f.join(\"\\t\");c+=\"\\t\"+g+\"\\n\";f=[]}return c};function sr(a,b,c){var d=this,e=b&&b.rowFilter,f;sr.l.constructor.call(this,c);C(a,wr,sr,0);var g=c.resultType;rr(b);if(e){var h=Ua(b);h.rowFilter=e.toString()}else h=b;(new Mf).a(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(xr,yr,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.D().clone().F(zr+\".\"+yr).I({meta:1});(new Pf(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.c=!0;Wj(d)},d.Lb)},function(l){d.Lb(l.message)})}u(sr,fr);t(\"H.service.extension.customLocation.TileProvider\",sr);sr.prototype.s=function(a,b,c){return new br(a,b,c)};\nsr.prototype.K=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Ob().get(g);var k={cancel:hd},l=!0,m=this.a;g&&(4===m||8===m?g.le()||(d(Mp.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var p=Kp.setTimeout(function(){h=new Pf(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Kp.clearTimeout(p)}}return k};sr.prototype.requestInternal=sr.prototype.K;sr.prototype.u=function(){sr.l.u.call(this);new Pf(\"cle\",{message:[this.uid,3]})};function Ar(){if(Br)throw new Xc(Ar);}t(\"H.service.extension.customLocation.Table\",Ar);var Br=!0;function Cr(a,b){var c;Br=!1;var d=new Ar;Br=!0;d.c=pc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=mc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(Cr,1,\"Invalid number of cells\");}else b=[];d.a=b;return d}Ar.prototype.be=function(){return this.c};Ar.prototype.getMeta=Ar.prototype.be;Ar.prototype.ee=function(){return this.a.length/this.b};\nAr.prototype.getRowCount=Ar.prototype.ee;Ar.prototype.Bc=function(a){return a<this.a.length/this.b?new Dr(this,a):B};Ar.prototype.getRow=Ar.prototype.Bc;Ar.prototype.Gn=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new Dr(this,b);return c};Ar.prototype.getRows=Ar.prototype.Gn;Ar.prototype.Wg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.Wg,0,\"Invalid number of cells\");this.a=c.concat(a);return d};Ar.prototype.addCells=Ar.prototype.Wg;\nAr.prototype.cm=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.Bc(c)};Ar.prototype.addRow=Ar.prototype.cm;Ar.prototype.Ua=function(){return this.c.columnNames};Ar.prototype.getColumnNames=Ar.prototype.Ua;Ar.prototype.Ue=function(a){return this.f[a]===B?B:new Er(this,a)};Ar.prototype.getColumn=Ar.prototype.Ue;Ar.prototype.xa=function(a,b){return this.a[a*this.b+this.f[b]]};Ar.prototype.getCell=Ar.prototype.xa;\nAr.prototype.Nc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.Nc,0,\"Row index out of bounds\");if(b===B)throw new D(this.Nc,0,\"Column unknown\");this.a[a*this.b+b]=c};Ar.prototype.setCell=Ar.prototype.Nc;\nAr.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.Ua(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof Ar))throw new D(this.concat,c);if(\"\"+f.Ua()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.a&&(e=e.concat(f.a))}return Cr(this.c,e)};Ar.prototype.concat=Ar.prototype.concat;var Fr=/(\\n|\\t|\\r|\")/;\nAr.prototype.Xi=function(a,b){var c,d=this.b,e=this.Ua(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.Xi,1,\"No columns filtered\");Gr(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],Gr(this,g,h,e,d,f,a,k)}else for(l=this.ee(),e=0;e<l;e++)g.push(\"\\n\"),Gr(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction Gr(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(Fr.test(l))throw new D(a.Xi,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function Er(a,b){this.b=a;this.a=b}Ar.Column=Er;Er.prototype.xa=function(a){return this.b.xa(a,this.a)};Er.prototype.getCell=Er.prototype.xa;Er.prototype.Nc=function(a,b){this.b.Nc(a,this.a,b)};Er.prototype.setCell=Er.prototype.Nc;\nfunction Dr(a,b){this.a=a;this.gi=b}Ar.Row=Dr;Dr.prototype.Ua=function(){return this.a.Ua()};Dr.prototype.getColumnNames=Dr.prototype.Ua;Dr.prototype.xa=function(a){return this.a.xa(this.gi,a)};Dr.prototype.getCell=Dr.prototype.xa;Dr.prototype.Nc=function(a,b){this.a.Nc(this.gi,a,b)};Dr.prototype.setCell=Dr.prototype.Nc;Dr.prototype.xd=function(){return this.a};Dr.prototype.getTable=Dr.prototype.xd;function Hr(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(Hr,0);this.b=String(a).charCodeAt(0);this.hi=A(this.hi,this);this.A=Ir}var Ir=0;n=Hr.prototype;n.getState=function(){return this.A};function Jr(a,b,c){var d=a.A;if(d!==b)throw 1===d&&(a.A=Ir),new Xc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}n.abort=function(){Jr(this,2,Hr.prototype.abort);this.A=Ir};\nn.hi=function(a){this.A=Ir;throw new D(Hr.prototype.parse,0,\"Malformed DSV at row \"+this.a.j+\" column \"+this.a.b+\": \"+a);};function Kr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.A=Ir;return c}n.parse=function(a,b,c){Jr(this,Ir,Hr.prototype.parse);a=a.trim();this.a=new Lr(a,this.b,this.hi);this.c=b;this.Ok=c||ef;this.A=2;this.resume()};n.Ok=ef;\nn.resume=function(){var a=this.a,b=[];Jr(this,2,Hr.prototype.resume);this.A=1;do{if(!a.g){this.A=Ir;break}if(e>a.b){if(void 0!==c&&c!==e){this.a.a(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.j;var e=a.b;var f=a.Nf;var g=this.Ok(d,e,a);if(a.Nf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}Mr(a);this.c(d,e,g)&&(this.A=a.g?2:Ir)}while(1===this.A);2!=this.A&&void 0!==c&&0<e&&c!==e&&this.a.a(\"The number of columns must be the same for all rows\")};\nfunction Lr(a,b,c){this.c=new $n(a);this.m=b;this.g=!0;this.Nf=this.j=this.b=0;Mr(this);this.a=c;this.f=[];this.i=!1}n=Lr.prototype;n.Nf=0;function Mr(a){var b=a.c.Tb();a.o=!1;(a.aa=34===b)&&a.c.next()}function Nr(a,b){var c=a.c;a.o=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Tb()&&a.a(\"CR without LF\");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a(\"End of field expected\")}c.next();return-1}\nn.Tb=function(){if(this.o)var a=-1;else{var b=this.c;a=b.Tb();if(this.aa)switch(a){case 34:b.next();a=b.Tb();34!==a&&(a=Nr(this,a));break;case -1:this.a(\"Closing quotation mark expected\")}else switch(a){case 34:this.a(\"Unexpected quotation mark\");case this.m:case 13:case 10:case -1:a=Nr(this,a)}}return a};n.ze=function(){this.i=!0;this.f=[]};n.Ud=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};n.next=function(){var a=this.Tb();-1!==a&&this.c.next();this.i&&this.f.push(a);this.Nf++;return a};function Or(a,b,c,d){d=d||{};if(!b)throw new D(Or,1,\"has to be a function\");if(!c)throw new D(Or,2,\"has to be a function\");this.c=b;this.g=c;this.a=[];this.i=d.duration||Pr;this.b=A(this.b,this);this.f={};a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.Td[c]=new Hr;this.fi[c]=Kr(this.Td[c],d);var e={layerId:c,columnNames:this.fi[c]};this.Th.push(c);this.f[c]=Cr(e);this.Rc[c]=zk();Qr(this,d,c);this.b(c)}}var Pr=100;n=Or.prototype;\nn.fi={};n.Th=[];n.Td={};n.Rc={};n.Wi={};function Qr(a,b,c){var d=[],e=a.fi[c].length-1,f=a.f[c];try{a.Td[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.Bc(f.Wg(d))),zk()-a.Rc[c]>a.i&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return Fn(k)})}catch(g){a.g(g)}}n.cancel=function(){for(var a in this.Wi)x.clearTimeout(this.Wi[a])};Or.prototype.cancel=Or.prototype.cancel;\nOr.prototype.b=function(a){var b=this,c,d;this.Wi[a]=x.setTimeout(function(){if(2===b.Td[a].getState())b.Rc[a]=zk(),b.c(b.a,!1),b.a=[],b.Td[a].resume(),b.b(a);else{c=!0;for(d=0;d<b.Th.length;d++)if(b.Td[b.Th[d]].getState()!==Ir){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function wr(a){wr.l.constructor.call(this,wr,a)}u(wr,Pp);t(\"H.service.extension.customLocation.Service\",wr);wr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};wr.CONFIG_KEY=\"customLocation\";wr.prototype.wc=function(a,b){var c=b&&b.resultType;a=new sr(this,a,b);var d;1===c||2===c?d=new Bn(a):d=new ll(a);return d};wr.prototype.createTileLayer=wr.prototype.wc;\nfunction Rr(a,b,c,d){var e;a=a===Sr?\"changes\":\"file\";var f=b[a],g=zc(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(Tr)h?e=f:e=nf(f,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var Tr=x.FormData&&!!x.FormData.prototype.append;wr.prototype.request=function(a,b,c,d,e){return this.T(a,b,c,d,e)};\nwr.prototype.T=function(a,b,c,d,e){var f=\"text/plain\",g=a===Ur.LAYERS_UPLOAD||a===Ur.LAYERS_MODIFY||a===Ur.LAYERS_IMPORT,h=c,k={data:B,method:\"GET\",headers:this.gf};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);$q(this.request,3,d,e);g&&(C(c,Object,this.request,2,\"Invalid request parameters\"),h=Ua(c),Rr(a,h,k,this.request));var l=this.D().clone().F(a+\".\"+b).I(h);b===Vr.JSON&&(f=\"application/json\");a=new rf(f,l.toString(),fe,k);a.then(function(m){var p=m.issues;p&&m.error_id&&\nm.response_code?e(Error(p[0].message)):d(m)},function(m){\"error\"===m.type||404===m.status?e(Error(m.statusText||\"Unable to load data\")):m.json().then(function(p){e(Error(\"[\"+p.issues[0].message+\"] \"+l+\" request failed\"))},function(){e(Error(\"[\"+m.statusText+\"] \"+l+\" request failed\"))})});return a};\nvar xr=\"layers/list\",Sr=\"layers/modify\",zr=\"tiled/tile\",Ur={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:xr,LAYERS_MODIFY:Sr,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:zr};wr.EntryPoint=Ur;var yr=\"json\",Vr={TXT:\"txt\",JSON:yr};wr.EntryPointType=Vr;\nwr.prototype.tb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(xr,yr,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(Cr(g))},c)},c)};wr.prototype.getLayer=wr.prototype.tb;\nwr.prototype.hk=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",yr,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.tb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};wr.prototype.grantAccess=wr.prototype.hk;wr.prototype.Ej=function(a,b,c){return this.request(\"layers/delete\",yr,{layer_ids:a},b,c)};wr.prototype.deleteLayer=wr.prototype.Ej;\nwr.prototype.qd=function(a,b,c){function d(){setTimeout(function(){k.tb(g,function(q){setTimeout(e.bind(null,q),m)},function(){64E3>l?(l+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(q){var r=JSON.stringify(q.Ua()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.Ej(g,function(){c(x.Error(w))},function(z){c(x.Error(w+\". \"+z.message))})},m)}else v&&v.length?k.hk(g,v,b,c):b(q)}var f,g,h,k=this,l=0,m=1E3;var p=!a||!tr(g=\na.layerId)&&(f=\"layerId\")||!ur(h=a.columnNames)&&(f=\"columnNames\")?0:Ca(b)?Ca(c)?-1:2:1;if(0<=p)throw new D(k.qd,p,f||arguments[p]);return k.tb(g,function(){c(x.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request(\"layers/upload\",yr,q,d,c)})};wr.prototype.createLayer=wr.prototype.qd;\nwr.prototype.Jd=function(a,b,c,d){var e=[],f;a=this.request(a,yr,b,function(g){g.geometries.length?(g=vr(g,b.layer_id),f=new Or(g,c,d),e.push(f)):c(ff,!0)},d);e.push(a);return new nr(e)};wr.prototype.Yb=function(a,b,c,d,e,f){if(!yc(a))throw new D(this.Yb,0,\"has invalid type\");C(b,Wf,this.Yb,1,\"has invalid type\");if(!Cc(c))throw new D(this.Yb,2,\"has invalid type\");$q(this.Yb,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Wa(a,f);return this.Jd(\"search/proximity\",a,d,e)};\nwr.prototype.searchByProximity=wr.prototype.Yb;wr.prototype.Xb=function(a,b,c,d,e,f){var g=\"\";if(!yc(a))throw new D(this.Xb,0,\"has invalid type\");if(!zc(b)&&!C(b,L))throw new D(this.Xb,1,\"has invalid type\");if(!Cc(c))throw new D(this.Xb,2,\"has invalid type\");$q(this.Xb,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(zc(b))a.route_id=b;else{var h=b.Y;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Wa(a,f);return this.Jd(\"search/corridor\",a,d,e)};\nwr.prototype.searchByCorridor=wr.prototype.Xb;wr.prototype.Mc=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!yc(a))throw new D(this.Mc,0,\"has invalid type\");C(b,K,this.Mc,1,\"has invalid type\");$q(this.Mc,2,c,d);b={bbox:b.la+\",\"+b.ca+\";\"+b.na+\",\"+b.ia};e&&Wa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.Jd(\"search/bbox\",b,f,d));return new nr(g)};wr.prototype.searchByBoundingBox=wr.prototype.Mc;\nwr.prototype.Ci=function(a,b,c,d){var e,f=[];if(!zc(a))throw new D(this.Ci,0,\"has invalid type\");$q(this.Ci,1,b,c);var g={layer_id:a};d&&Wa(g,d);d=this.request(\"search/all\",yr,g,function(h){h.geometries.length?(h=vr(h,a),e=new Or(h,b,c),f.push(e)):b(ff,!0)},c);f.push(d);return new nr(f)};wr.prototype.searchAll=wr.prototype.Ci;var Wr={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Xr(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(U){v++;e(U,this,v===q)}var k=\"append\"!==b,l,m={},p=mc(),q=0,r=[],v=0;if(!yc(c))throw new D(f,0,c);$q(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,Dr)){var z=w.xd().be().layerId;var J=w.xa(\"GEOMETRY_ID\");if(k){if(J===y||\"\"===String(J))var G='GEOMETRY_ID must not be null or \"\"';m[J=z+\"_\"+J]&&(G=\"same GEOMETRY_ID for multiple rows\");m[J]=w}else J!==y&&\"\"!==String(J)&&(G='GEOMETRY_ID must be null or \"\"')}else G=\"Invalid type\";if(G)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+G);J=p[z];J||(J=p[z]=[],q++);J.push(w)}for(z in p){J=p[z];c=[];for(l=J.length;l--;)c.push(J[l].gi);r.push(a.request(Sr,yr,{layer_id:z,action:b,changes:J[0].xd().Xi(Wr[b]||null,c)},A(g,J),A(h,J)))}return new nr(r)}wr.prototype.uj=function(a,b,c){return Xr(this,\"append\",a,b,c,this.uj)};wr.prototype.appendRows=wr.prototype.uj;wr.prototype.Ql=function(a,b,c){return Xr(this,\"update\",a,b,c,this.Ql)};wr.prototype.updateRows=wr.prototype.Ql;\nwr.prototype.Fj=function(a,b,c){return Xr(this,\"delete\",a,b,c,this.Fj)};wr.prototype.deleteRows=wr.prototype.Fj;Y.prototype.Om=function(a){return this.Ya(wr,a)};Y.prototype.getCustomLocationService=Y.prototype.Om;function Yr(a){xq.l.constructor.call(this,Yr,a)}u(Yr,Pp);t(\"H.service.extension.customRoute.Service\",Yr);Yr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};Yr.CONFIG_KEY=\"customRoute\";Yr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};Yr.prototype.Qd=function(a,b,c){$q(this.Qd,1,b,c);a=this.D().clone().F(\"calculateroute.json\").I(a);return this.K(a,b,c)};Yr.prototype.calculateRoute=Yr.prototype.Qd;\nY.prototype.Pm=function(a){return this.Ya(Yr,a)};Y.prototype.getCustomRoutingService=Y.prototype.Pm;function Zr(a){Zr.l.constructor.call(this,Zr,a)}u(Zr,Pp);t(\"H.service.SearchService\",Zr);Zr.CONFIG_KEY=\"search\";Zr.prototype.a=function(){return{subDomain:\"search\",path:\"v1\"}};Zr.prototype.b=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};Zr.prototype.rh=function(a,b,c){a=this.D().clone().Ma(\"geocode\").F(\"geocode\").I(a);return this.K(a,b,c)};Zr.prototype.geocode=Zr.prototype.rh;\nZr.prototype.Bi=function(a,b,c){a=this.D().clone().Ma(\"revgeocode\").F(\"revgeocode\").I(a);return this.K(a,b,c)};Zr.prototype.reverseGeocode=Zr.prototype.Bi;Zr.prototype.gm=function(a,b,c){a=this.D().clone().Ma(\"autosuggest\").F(\"autosuggest\").I(a);return this.K(a,b,c)};Zr.prototype.autosuggest=Zr.prototype.gm;Zr.prototype.om=function(a,b,c){a=this.D().clone().Ma(\"discover\").F(\"discover\").I(a);return this.K(a,b,c)};Zr.prototype.discover=Zr.prototype.om;\nZr.prototype.so=function(a,b,c){a=this.D().clone().Ma(\"lookup\").F(\"lookup\").I(a);return this.K(a,b,c)};Zr.prototype.lookup=Zr.prototype.so;Zr.prototype.im=function(a,b,c){a=this.D().clone().Ma(\"browse\").F(\"browse\").I(a);return this.K(a,b,c)};Zr.prototype.browse=Zr.prototype.im;Y.prototype.In=function(a){return this.Ya(Zr,a)};Y.prototype.getSearchService=Y.prototype.In;function $r(a){this.g=!!a.toBypassToken;if(!this.g&&!a.token)throw new D($r,0,'\"token\" must be specified');$r.l.constructor.call(this,$r,a);this.j=a.token;this.i={};this.f={}}u($r,Pp);t(\"H.service.xyz.Service\",$r);$r.prototype.a=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};$r.prototype.b=function(a){return Error(a.errorMessage||a.message)};\n$r.prototype.Dh=function(a,b,c){wc(a,\"String\",this.Dh,0,'\"projectId\" must be a string');as(this.Dh,1,b,c);a=bs(this.D().clone().Md(\"project-api/projects/\"+a));return this.K(a,b,c)};$r.prototype.getProject=$r.prototype.Dh;$r.prototype.ck=function(a,b,c){as(this.ck,0,a,b);c=cs(this,this.D().clone().I(c||{}));return this.K(c,a,b)};$r.prototype.getSpaces=$r.prototype.ck;\n$r.prototype.eg=function(a,b,c){wc(a,\"String\",this.eg,0,'\"spaceId\" must be a string');as(this.eg,1,b,c);a=cs(this,this.D().clone().F(a));return this.K(a,b,c)};$r.prototype.getSpace=$r.prototype.eg;$r.prototype.fe=function(a,b,c){wc(a,\"String\",this.fe,0,'\"spaceId\" must be a string');as(this.fe,1,b,c);a=cs(this,this.D().clone().F(a+\"/statistics\"));return this.K(a,b,c)};$r.prototype.getStatistics=$r.prototype.fe;\n$r.prototype.$f=function(a,b,c,d,e,f,g){a=cs(this,this.D().clone().F(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").I(Object.assign({clip:!0},g)));return this.K(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};$r.prototype.search=function(a,b,c,d){wc(a,\"String\",this.search,0,'\"spaceId\" must be a string');as(this.search,1,b,c);a=cs(this,this.D().clone().F(a+\"/search\").I(d||{}));return this.K(a,b,c)};$r.prototype.search=$r.prototype.search;\n$r.prototype.cd=function(a,b,c,d){wc(a,\"String\",this.cd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.cd,1,'\"params\" must be an object');as(this.cd,2,c,d);a=cs(this,this.D().clone().F(a+\"/features\").I(b));return this.K(a,c,d)};$r.prototype.getFeaturesById=$r.prototype.cd;\n$r.prototype.Zd=function(a,b,c,d){wc(a,\"String\",this.Zd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.cd,1,'\"params\" must be an object');as(this.Zd,2,c,d);a=cs(this,this.D().clone().F(a+\"/bbox\").I(b));return this.K(a,c,d)};$r.prototype.getFeaturesByBoundingBox=$r.prototype.Zd;$r.prototype.ta=function(a){var b=this.i[a];if(b)return b;this.f[a]||this.Re(a);return null};\n$r.prototype.kd=function(a,b,c,d,e){wc(a,\"String\",this.kd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.kd,1,'\"geojsonObject\" must be an object');as(this.kd,2,c,d);if(e&&!Da(e))throw new D(this.kd,4,'\"opt_params\" must be an object');return ds(this,a,c,d,\"PUT\",b,e)};$r.prototype.putFeatures=$r.prototype.kd;\n$r.prototype.hd=function(a,b,c,d,e){wc(a,\"String\",this.hd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.hd,1,'\"featureCollection\" must be an object');as(this.hd,2,c,d);if(e&&!Da(e))throw new D(this.hd,4,'\"opt_params\" must be an object');return ds(this,a,c,d,\"POST\",b,e)};$r.prototype.postFeatures=$r.prototype.hd;\n$r.prototype.sd=function(a,b,c,d){wc(a,\"String\",this.sd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.sd,1,'\"params\" must be an object');as(this.sd,2,c,d);return ds(this,a,c,d,\"DELETE\",B,b)};$r.prototype.deleteFeatures=$r.prototype.sd;\nfunction ds(a,b,c,d,e,f,g){var h=Object.assign(a.g?{}:{authorization:\"Bearer \"+a.j},{\"Content-Type\":\"application/geo+json\"},a.gf);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=bs(a.D().clone().F(b+\"/features\").I(g||{}));f=new rf(\"application/json\",b.toString(),fe,e);f.then(c,Rp(a,b,d));return f}$r.prototype.Re=function(a){var b=this;this.f[a]=es;this.eg(a,function(c){b.f[a]=fs;b.i[a]=c.copyright;b.dispatchEvent(\"copyrightupdate\")},function(c){b.f[a]=gs;throw c;})};\nfunction cs(a,b){return a.g?b:bs(b).I({access_token:a.j})}function bs(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Oi(b)}$r.CONFIG_KEY=\"xyz\";var es=1,fs=2,gs=-1;function as(a,b,c,d){if(!Ca(c))throw new D(a,b,'\"onResult\" must be a function');if(!Ca(d))throw new D(a,b+1,'\"onError\" must be a function');}Y.prototype.Vn=function(a){return this.Ya($r,a)};Y.prototype.getXYZService=Y.prototype.Vn;function hs(a,b,c){var d;hs.l.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);C(a,$r,hs,0);if(!zc(b))throw new D(hs,1,'\"spaceId\" must be a string');this.s=a;this.a=b;this.c={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.c[e]=c[e])},this),a=c.parameters))for(d in a)this.c[d]=a[d];this.ac(this.f===Vj.WEBGL?new Th({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.a},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,\norder:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.a,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,\n8,14,12,18,16]},{layer:this.a,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.a,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.a,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#000000\",lineWidth:\"2px\",renderOrder:203}]}))}u(hs,R);t(\"H.service.xyz.Provider\",hs);hs.prototype.K=function(a,b,c,d,e){return this.s.$f(a,b,c,this.a,d,e,this.c)};\nhs.prototype.requestInternal=hs.prototype.K;hs.prototype.ta=function(){return this.s.ta(this.a)};hs.prototype.getCopyrights=hs.prototype.ta;hs.prototype.Ed=df;hs.prototype.providesOMV=hs.prototype.Ed;hs.prototype.ua=function(){return this.ub()};hs.prototype.getStyle=hs.prototype.ua;hs.prototype.rc=function(a){C(a,Th)&&a.b(\"MVT\");this.ac(a)};hs.prototype.setStyle=hs.prototype.rc;t(\"H.service.buildInfo\",function(){return Ef(\"H-service\",\"1.30.4\",\"2978c8b\")});\n");